"use strict";(self.webpackChunknasa=self.webpackChunknasa||[]).push([[465],{4465:(x,u,s)=>{s.r(u),s.d(u,{AdminSMTModule:()=>F});var T=s(6870),c=s(1567),t=s(5879),z=s(553),p=s(9862);let m=(()=>{class a{findLstSMT(e){return this.http.get(`${this.apiUrl}?name=${e}`)}findCrrSmt(e){return this.http.get(`${this.apiUrl}?name=${e}`)}updateCrrSmt(e,i){return this.http.put(`${this.apiUrl}/${e}`,i).subscribe(n=>{})}constructor(e){this.http=e,this.apiUrl=`${z.N.apiURL}/entities`}static#t=this.\u0275fac=function(i){return new(i||a)(t.LFG(p.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var D=s(9711);let A=(()=>{class a{constructor(e){this.adminSMTService=e,this.category="sat-my-thuat",this.items=[],this.path="",this.columnConfig=[{key:"title",header:"T\xean s\u1ea3n ph\u1ea9m"}]}ngOnInit(){this.adminSMTService.findLstSMT("SAT_MY_THUAT").subscribe(e=>{this.path=e[0].name,this.items=JSON.parse(e?.[0]?.data)})}onClick(){}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(m))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-smt-lst"]],decls:4,vars:4,consts:[[1,"create-btn"],[1,"uppercase","my-10","text-xl"],[3,"displayedColumns","data","category","path"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Danh m\u1ee5c s\u1eaft m\u1ef9 thu\u1eadt"),t.qZA()(),t._UZ(3,"app-table",2)),2&i&&(t.xp6(3),t.Q6J("displayedColumns",n.columnConfig)("data",n.items)("category",n.category)("path",n.path))},dependencies:[D.a]})}return a})();var v=s(7930),b=s.n(v),r=s(95),h=s(9e3),g=s(6814),d=s(1628),Z=s(5971),y=s(4009),_=s(9545),f=s(4634),M=s(4344),C=s(9299);function E(a,S){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td",19),t._UZ(2,"img",20),t.qZA(),t.TgZ(3,"td")(4,"textarea",21),t._uU(5),t.qZA()(),t.TgZ(6,"td")(7,"button",22),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showDeleteConfirm(o))}),t._uU(8,"Xo\xe1"),t.qZA()()()}if(2&a){const e=S.$implicit;t.xp6(2),t.Q6J("src",e,t.LSH),t.xp6(3),t.Oqu(e)}}function J(a,S){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-table",9,10)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"\u1ea2nh"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"URL"),t.qZA()()(),t.TgZ(9,"tbody")(10,"tr")(11,"td",19),t._UZ(12,"img",23),t.qZA(),t.TgZ(13,"td")(14,"textarea",24),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.newImageSrc=n)}),t.qZA()()()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("nzData",e.dataImg)("nzShowPagination",!1),t.xp6(11),t.Q6J("src",e.newImageSrc,t.LSH),t.xp6(2),t.Q6J("ngModel",e.newImageSrc)}}const O=c.Bz.forChild([{path:"",component:A},{path:":name",component:(()=>{class a{constructor(e,i,n,o,l){this.fb=e,this.activatedRoute=i,this.adminSMTService=n,this.http=o,this.modal=l,this.Editor=b(),this.model={editorData:""},this.isDisableDesc=!0,this.isDisableUrlImg=!0,this.isDisableDescDetail=!0,this.isDisplayAlert="none",this.newImageSrc="",this.name="",this.data={id:"",content:"",desc:"",image:"",imageLst:[],path:"",title:""},this.dataImg=[],this.introduce=[],this.idCrrSmt=0,this.isVisible=!1}buildForm(){this.formDesc=this.fb.group({name:[this.data.title],desc:[this.data.desc]})}ngOnInit(){this.buildForm(),this.name=this.activatedRoute.snapshot.params.name,this.findCrrSmt()}findCrrSmt(){this.adminSMTService.findCrrSmt(this.name).subscribe(e=>{let i=JSON.parse(e?.[0]?.data);this.data=i,this.dataImg=i.imageLst,this.introduce=i.content,this.idCrrSmt=e[0].id,this.model.editorData=this.data.content})}onSave(){let e={...this.data,title:this.formDesc.value.name||this.data.title,desc:this.formDesc.value.desc||this.data.desc};this.updateCrrSmt(e)}updateCrrSmt(e){let i={name:this.name,data:JSON.stringify(e)};this.adminSMTService.updateCrrSmt(this.idCrrSmt,i),this.findCrrSmt(),this.findCrrSmt(),this.isDisplayAlert="flex",setTimeout(()=>{this.isDisplayAlert="none"},3e3)}onSaveDesc(){let e={...this.data,content:this.model.editorData};this.updateCrrSmt(e)}showModal(){this.isVisible=!0}handleOk(){let e={...this.data,imageLst:[...this.data.imageLst,this.newImageSrc]};this.updateCrrSmt(e),this.findCrrSmt(),this.findCrrSmt(),this.isVisible=!1}handleCancel(){this.isVisible=!1}showDeleteConfirm(e){this.modal.confirm({nzTitle:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 \u1ea3nh n\xe0y?",nzOkText:"Yes",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>{let i=this.dataImg.filter(o=>o!==e),n={...this.data,imageLst:i};this.updateCrrSmt(n),this.findCrrSmt()},nzCancelText:"No",nzOnCancel:()=>{}})}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(r.qu),t.Y36(c.gz),t.Y36(m),t.Y36(p.eN),t.Y36(h.Sf))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-smt-detail"]],decls:38,vars:13,consts:[["nzTitle","M\xf4 t\u1ea3 ng\u1eafn"],[3,"formGroup"],[1,"btn","text-end"],["nz-button","","nzType","primary",1,"m-3",3,"disabled","click"],[1,"font-bold","my-3"],["type","text","formControlName","name",1,"my-3","w-full",3,"value","ngModelChange"],["formControlName","desc",1,"w-full","my-3",3,"value","ngModelChange"],["nzTitle","\u1ea2nh minh ho\u1ea1"],["nz-button","","nzType","primary",1,"my-3",3,"click"],["nzSize","middle",3,"nzData","nzShowPagination"],["middleTable",""],[4,"ngFor","ngForOf"],[1,"modalCrete"],["nzTitle","Th\xeam \u1ea3nh minh ho\u1ea1",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nzTitle","M\xf4 t\u1ea3 chi ti\u1ebft"],[3,"ngModel","editor","ngModelChange"],[1,"alert","w-1/2","justify-end","fixed","top-3","right-3"],["nzType","success","nzMessage","C\u1eadp nh\u1eadt th\xe0nh c\xf4ng","nzShowIcon","",1,"w-1/2"],[2,"width","20%"],["alt","\u1ea3nh kh\xf4ng t\u1ed3n t\u1ea1i",2,"width","100px","height","auto",3,"src"],[1,"w-full"],["nz-button","","nzSize","large","nzType","primary",3,"click"],["alt","",2,"width","100px","height","auto",3,"src"],[1,"w-full","border","border-1","border-solid","p-2",3,"ngModel","ngModelChange"]],template:function(i,n){1&i&&(t.TgZ(0,"nz-tabset")(1,"nz-tab",0)(2,"form",1)(3,"div",2)(4,"button",3),t.NdJ("click",function(){return n.onSave()}),t._uU(5,"L\u01b0u"),t.qZA()(),t.TgZ(6,"label",4),t._uU(7,"T\xean s\u1ea3n ph\u1ea9m"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(){return n.isDisableDesc=!1}),t.qZA(),t.TgZ(9,"label",4),t._uU(10,"M\xf4 t\u1ea3 ng\u1eafn"),t.qZA(),t.TgZ(11,"textarea",6),t.NdJ("ngModelChange",function(){return n.isDisableDesc=!1}),t.qZA()()(),t.TgZ(12,"nz-tab",7)(13,"div",2)(14,"button",8),t.NdJ("click",function(){return n.showModal()}),t._uU(15,"Th\xeam"),t.qZA()(),t.TgZ(16,"nz-table",9,10)(18,"thead")(19,"tr")(20,"th"),t._uU(21,"\u1ea2nh"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"URL"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"T\xe1c v\u1ee5"),t.qZA()()(),t.TgZ(26,"tbody"),t.YNc(27,E,9,2,"tr",11),t.qZA()(),t.TgZ(28,"div",12)(29,"nz-modal",13),t.NdJ("nzVisibleChange",function(l){return n.isVisible=l})("nzOnCancel",function(){return n.handleCancel()})("nzOnOk",function(){return n.handleOk()}),t.YNc(30,J,15,4,"ng-container",14),t.qZA()()(),t.TgZ(31,"nz-tab",15)(32,"div",2)(33,"button",3),t.NdJ("click",function(){return n.onSaveDesc()}),t._uU(34,"L\u01b0u"),t.qZA()(),t.TgZ(35,"ckeditor",16),t.NdJ("ngModelChange",function(l){return n.model.editorData=l})("ngModelChange",function(){return n.isDisableDescDetail=!1}),t.qZA()()(),t.TgZ(36,"div",17),t._UZ(37,"nz-alert",18),t.qZA()),2&i&&(t.xp6(2),t.Q6J("formGroup",n.formDesc),t.xp6(2),t.Q6J("disabled",n.isDisableDesc),t.xp6(4),t.Q6J("value",n.data.title),t.xp6(3),t.Q6J("value",n.data.desc),t.xp6(5),t.Q6J("nzData",n.dataImg)("nzShowPagination",!1),t.xp6(11),t.Q6J("ngForOf",n.dataImg),t.xp6(2),t.Q6J("nzVisible",n.isVisible),t.xp6(4),t.Q6J("disabled",n.isDisableDescDetail),t.xp6(2),t.Q6J("ngModel",n.model.editorData)("editor",n.Editor),t.xp6(1),t.Udp("display",n.isDisplayAlert))},dependencies:[g.sg,d.N8,d.Uo,d._C,d.Om,d.p0,d.$Z,Z.ix,y.w,_.dQ,f.xH,f.xw,h.du,h.Hf,M.r,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,C.u,r.On]})}return a})()}]);let F=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({providers:[m],imports:[g.ez,O,T.m,C.d,r.u5]})}return a})()}}]);